From 1d35560dc603ac43a87a5584c6776d9872ede4e5 Mon Sep 17 00:00:00 2001
From: Julien Fortin <julien@cumulusnetworks.com>
Date: Fri, 19 Apr 2019 17:14:21 +0800
Subject: addons: bridge: fix 'NoneType' object has
 no attribute '__getitem__' error

Fixes #90

Signed-off-by: Julien Fortin <julien@cumulusnetworks.com>
Signed-off-by: Alexandre Derumier <aderumier@odiso.com>
---
 ifupdown2/addons/bridge.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/ifupdown2/addons/bridge.py b/ifupdown2/addons/bridge.py
index 9c1de18..973ec7e 100644
--- a/ifupdown2/addons/bridge.py
+++ b/ifupdown2/addons/bridge.py
@@ -2055,8 +2055,8 @@ class bridge(moduleBase):
         finally:
             if ifaceobj.link_type != ifaceLinkType.LINK_NA:
                 for p in running_ports:
-                    if (ifaceobj_getfunc(p)[0].link_privflags &
-                            ifaceLinkPrivFlags.KEEP_LINK_DOWN):
+                    ifaceobj_list = ifaceobj_getfunc(p)
+                    if (ifaceobj_list and ifaceobj_list[0].link_privflags & ifaceLinkPrivFlags.KEEP_LINK_DOWN):
                         netlink.link_set_updown(p, "down")
                         continue
                     try:
-- 
2.11.0

